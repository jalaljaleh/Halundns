<!-- Halun DNS - MenuBar Styles (Modern.xaml)
     Purpose: UI styles for menu bars used across the app.
     Author: Jalal Jaleh
     License: MIT -->
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <SolidColorBrush x:Key="MenuBackgroundBrush" Color="#131821"/>
    <SolidColorBrush x:Key="SubMenuBackgroundBrush" Color="#131821"/>
    <SolidColorBrush x:Key="MenuBorderBrush" Color="#26323A"/>
    <SolidColorBrush x:Key="TextWhite" Color="#FFFFFF"/>
    <SolidColorBrush x:Key="MenuHoverBrush" Color="#2A3547"/>
    <LinearGradientBrush x:Key="PrimaryGradient" EndPoint="0.5,1" StartPoint="0.5,0">
        <GradientStop Color="#3A4A63" Offset="0"/>
        <GradientStop Color="#2A3547" Offset="1"/>
    </LinearGradientBrush>

    <Style x:Key="{x:Static MenuItem.SeparatorStyleKey}" TargetType="Separator">
        <Setter Property="Height" Value="1"/>
        <Setter Property="Margin" Value="10,4,10,4"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Separator">
                    <Border BorderBrush="{StaticResource MenuBorderBrush}" BorderThickness="0.5"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <ControlTemplate x:Key="TopLevelHeaderTemplate" TargetType="MenuItem">
        <Border x:Name="templateRoot" Background="Transparent" CornerRadius="3" SnapsToDevicePixels="True">
            <Grid VerticalAlignment="Center">
                <ContentPresenter ContentSource="Header" Margin="10,5" RecognizesAccessKey="True" TextBlock.Foreground="{StaticResource TextWhite}"/>
                <Popup x:Name="PART_Popup" AllowsTransparency="True" Focusable="False" IsOpen="{Binding IsSubmenuOpen, RelativeSource={RelativeSource TemplatedParent}}" PopupAnimation="Fade" Placement="Bottom">
                    <Border Background="{StaticResource SubMenuBackgroundBrush}" BorderBrush="{StaticResource MenuBorderBrush}" BorderThickness="1" CornerRadius="4" Padding="2">
                        <ItemsPresenter x:Name="ItemsPresenter" Grid.IsSharedSizeScope="True"/>
                    </Border>
                </Popup>
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsHighlighted" Value="True">
                <Setter TargetName="templateRoot" Property="Background" Value="{StaticResource MenuHoverBrush}"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <ControlTemplate x:Key="SubmenuItemTemplate" TargetType="MenuItem">
        <Border x:Name="templateRoot" Background="Transparent" CornerRadius="2" Margin="2,1" SnapsToDevicePixels="True">
            <Grid Margin="5,4">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="20" SharedSizeGroup="Icon"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto" SharedSizeGroup="Shortcut"/>
                </Grid.ColumnDefinitions>
                <ContentPresenter x:Name="Icon" ContentSource="Icon" Margin="4,0" VerticalAlignment="Center"/>
                <ContentPresenter Grid.Column="1" ContentSource="Header" Margin="10,2,20,2" RecognizesAccessKey="True" TextBlock.Foreground="{StaticResource TextWhite}"/>
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsHighlighted" Value="True">
                <Setter TargetName="templateRoot" Property="Background" Value="{StaticResource PrimaryGradient}"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <ControlTemplate x:Key="SubmenuHeaderTemplate" TargetType="MenuItem">
        <Border x:Name="templateRoot" Background="Transparent" CornerRadius="2" Margin="2,1" SnapsToDevicePixels="True">
            <Grid Margin="5,4">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="20" SharedSizeGroup="Icon"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="15"/>
                </Grid.ColumnDefinitions>
                <ContentPresenter x:Name="Icon" ContentSource="Icon" Margin="4,0" VerticalAlignment="Center"/>
                <ContentPresenter Grid.Column="1" ContentSource="Header" Margin="10,2,10,2" RecognizesAccessKey="True" TextBlock.Foreground="{StaticResource TextWhite}"/>
                <Path Grid.Column="2" Data="M 0,0 L 4,4 L 0,8" Stroke="{StaticResource TextWhite}" StrokeThickness="1.5" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                <Popup x:Name="PART_Popup" AllowsTransparency="True" IsOpen="{Binding IsSubmenuOpen, RelativeSource={RelativeSource TemplatedParent}}" Placement="Right">
                    <Border Background="{StaticResource SubMenuBackgroundBrush}" BorderBrush="{StaticResource MenuBorderBrush}" BorderThickness="1" CornerRadius="4" Padding="2">
                        <ItemsPresenter x:Name="ItemsPresenter" Grid.IsSharedSizeScope="True"/>
                    </Border>
                </Popup>
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsHighlighted" Value="True">
                <Setter TargetName="templateRoot" Property="Background" Value="{StaticResource PrimaryGradient}"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <Style TargetType="Menu">
        <Setter Property="Background" Value="{StaticResource MenuBackgroundBrush}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Menu">
                    <Border Background="{TemplateBinding Background}" BorderBrush="{StaticResource MenuBorderBrush}" BorderThickness="0,0,0,0">
                        <StackPanel IsItemsHost="True" Orientation="Horizontal"/>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="MenuItem">
        <Setter Property="OverridesDefaultStyle" Value="True"/>
        <Style.Triggers>
            <Trigger Property="Role" Value="TopLevelHeader">
                <Setter Property="Template" Value="{StaticResource TopLevelHeaderTemplate}"/>
            </Trigger>
            <Trigger Property="Role" Value="SubmenuItem">
                <Setter Property="Template" Value="{StaticResource SubmenuItemTemplate}"/>
            </Trigger>
            <Trigger Property="Role" Value="SubmenuHeader">
                <Setter Property="Template" Value="{StaticResource SubmenuHeaderTemplate}"/>
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="DarkContextMenu" TargetType="ContextMenu">
        <Setter Property="Background" Value="{StaticResource MenuBackgroundBrush}"/>
        <Setter Property="BorderBrush" Value="{StaticResource MenuBorderBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ContextMenu">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="6">
                        <Border.Effect>
                            <DropShadowEffect BlurRadius="10" Opacity="0.4" ShadowDepth="2"/>
                        </Border.Effect>
                        <StackPanel IsItemsHost="True" Margin="2"/>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>